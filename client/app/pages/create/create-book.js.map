{"version":3,"sources":["pages/create/create-book.ts"],"names":["CreateBook","CreateBook.constructor","CreateBook.createBook_successHandler","CreateBook.createBook_errorHandler","CreateBook.createBook","CreateBook.listBooks"],"mappings":"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","file":"pages/create/create-book.js","sourcesContent":["/// <reference path=\"../../../typings/tsd.d.ts\" />\n\n// Angular 2\nimport {Component, View, Directive, coreDirectives} from 'angular2/angular2';\nimport {formDirectives, FormBuilder, Control, ControlGroup, Validators} from 'angular2/forms';\nimport {Router} from 'angular2/router';\n\nimport {BookService} from '../../services/BookService';\nimport {Book} from '../../models/Book';\n\n// Simple component\n@Component({\n    selector: 'create-book'\n})\n\n@View({\n    templateUrl: './public/app/pages/create/create-book.html',\n    directives: [coreDirectives, formDirectives]\n})\n\nexport class CreateBook {\n    createBookForm: ControlGroup;\n    isbnInput: Control;\n    titleInput: Control;\n    authorInput: Control;\n    publicationDateInput: Control;\n\n    book: Book;\n\n    canShowCreateFailedMsg: boolean;\n    createFailedMsg: string;\n\n    constructor(public router:Router, public bookService:BookService, public formBuilder: FormBuilder) {\n        this.book = new Book();\n        this.createFailedMsg = null;\n        this.canShowCreateFailedMsg = false;\n\n        this.createBookForm = formBuilder.group({\n            'isbn': ['', Validators.required],\n            'title': ['', Validators.required],\n            'author': [''],\n            'publicationDate': ['']\n        });\n\n        this.isbnInput = this.createBookForm.controls.isbn;\n        this.titleInput = this.createBookForm.controls.title;\n        this.authorInput = this.createBookForm.controls.author;\n        this.publicationDateInput = this.createBookForm.controls.publicationDate;\n    }\n\n    createBook_successHandler(response) {\n        if (response.status !== 201) {\n            response.json().then(data => {\n                this.canShowCreateFailedMsg = true;\n                this.createFailedMsg = data.errorMessage || 'An error has occurred';\n            });\n        } else {\n            this.listBooks();\n        }\n    }\n\n    createBook_errorHandler(error) {\n        this.createFailedMsg = error;\n    }\n\n    createBook() {\n        this.canShowCreateFailedMsg = false;\n\n        this.bookService.createBook(this.book.toJSON())\n            .then(response => this.createBook_successHandler(response))\n            .catch(error => this.createBook_errorHandler(error));\n    }\n\n    listBooks() {\n        this.router.parent.navigate('/list');\n    }\n}\n"],"sourceRoot":"/source/"}