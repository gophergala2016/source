{"version":3,"sources":["pages/edit/edit-book.ts"],"names":["EditBook","EditBook.constructor","EditBook.getBook","EditBook.updateBook_successHandler","EditBook.updateBook_errorHandler","EditBook.updateBook"],"mappings":"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","file":"pages/edit/edit-book.js","sourcesContent":["/// <reference path=\"../../../typings/tsd.d.ts\" />\n\n// Angular 2\nimport {Component, View, Directive, coreDirectives} from 'angular2/angular2';\nimport {formDirectives, FormBuilder, Control, ControlGroup, Validators} from 'angular2/forms';\nimport {RouteParams} from 'angular2/router';\nimport {Inject} from 'angular2/di';\n\nimport {BookService} from '../../services/BookService';\nimport {Book} from '../../models/Book';\n\n// Simple component\n@Component({\n    selector: 'edit-book'\n})\n\n@View({\n    templateUrl: './public/app/pages/edit/edit-book.html',\n    directives: [coreDirectives, formDirectives]\n})\n\nexport class EditBook {\n    editBookForm: ControlGroup;\n    titleInput: Control;\n    authorInput: Control;\n    publicationDateInput: Control;\n\n    book: Book;\n\n    canShowUpdateSuccessMsg: boolean;\n    canShowUpdateFailedMsg: boolean;\n    updateFailedMsg: string;\n\n    constructor(@Inject(RouteParams) params, public bookService:BookService, public formBuilder: FormBuilder) {\n        this.book = new Book();\n        this.canShowUpdateFailedMsg = false;\n        this.canShowUpdateSuccessMsg = false;\n        this.updateFailedMsg = null;\n\n        this.getBook(params.get('id'));\n\n        this.editBookForm = <ControlGroup>formBuilder.group({\n            'title': ['', Validators.required],\n            'author': [''],\n            'publicationDate': ['']\n        });\n\n        this.titleInput = this.editBookForm.controls.title;\n        this.authorInput = this.editBookForm.controls.author;\n        this.publicationDateInput = this.editBookForm.controls.publicationDate;\n    }\n\n    getBook(id:string) {\n        this.bookService.getBook(id)\n            .map(res => res.json())\n            .subscribe(res => this.book = Book.fromJSON(res));\n    }\n\n    updateBook_successHandler(response) {\n        if (response.status !== 200) {\n            this.canShowUpdateFailedMsg = true;\n            this.updateFailedMsg = 'Update has failed';\n        }\n\n        response.json().then(data => {\n            this.canShowUpdateSuccessMsg = true;\n            this.book = Book.fromJSON(data);\n        });\n    }\n\n    updateBook_errorHandler(error) {\n        this.updateFailedMsg = error;\n    }\n\n    updateBook() {\n        this.canShowUpdateSuccessMsg = false;\n        this.canShowUpdateFailedMsg = false;\n\n        this.bookService.updateBook(this.book.isbn, this.book.toJSON())\n            .then(response => this.updateBook_successHandler(response))\n            .catch(error => this.updateBook_errorHandler(error));\n    }\n}\n"],"sourceRoot":"/source/"}